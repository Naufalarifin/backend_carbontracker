generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = "mysql://avnadmin:AVNS_fECBo77M2yyCHFzvOiB@mysql-263738d7-naufal-d9df.c.aivencloud.com:25220/defaultdb?ssl-mode=REQUIRED"
}

model certificate {
  certificate_id Int       @id @default(autoincrement())
  company_id     Int
  issue_date     DateTime
  expiry_date    DateTime?
  company        company   @relation(fields: [company_id], references: [company_id], map: "Certificate_company_id_fkey")

  @@index([company_id], map: "Certificate_company_id_fkey")
}

model company {
  company_id           Int             @id @default(autoincrement())
  name                 String
  address              String?
  jenis_perusahaan     String?
  jumlah_karyawan      Int?
  pendapatan_perbulan  Float?
  ton_barang_perbulan  Float?
  unit_produk_perbulan Int?
  certificate          certificate[]
  emissioninput        emissioninput[]
  user                 user[]
}

model emissioninput {
  input_id            Int                   @id @default(autoincrement())
  company_id          Int
  month               Int
  year                Int
  created_at          DateTime              @default(now())
  company             company               @relation(fields: [company_id], references: [company_id], map: "EmissionInput_company_id_fkey")
  emissioninputdetail emissioninputdetail[]
  emissionresult      emissionresult?

  @@index([company_id], map: "EmissionInput_company_id_fkey")
}

model emissioninputdetail {
  detail_id      Int            @id @default(autoincrement())
  input_id       Int
  source_id      Int
  value          Float
  emission_value Float
  emissioninput  emissioninput  @relation(fields: [input_id], references: [input_id], map: "EmissionInputDetail_input_id_fkey")
  emissionsource emissionsource @relation(fields: [source_id], references: [source_id], map: "EmissionInputDetail_source_id_fkey")

  @@index([input_id], map: "EmissionInputDetail_input_id_fkey")
  @@index([source_id], map: "EmissionInputDetail_source_id_fkey")
}

model emissionresult {
  result_id      Int           @id @default(autoincrement())
  input_id       Int           @unique(map: "EmissionResult_input_id_key")
  total_emission Float
  analisis       String?       @db.Text
  level          String?
  emissioninput  emissioninput @relation(fields: [input_id], references: [input_id], map: "EmissionResult_input_id_fkey")
}

model emissionsource {
  source_id           Int                   @id @default(autoincrement())
  name                String
  unit                String
  emission_factor     Float
  kategori            String?
  emissioninputdetail emissioninputdetail[]
}

model user {
  user_id    Int      @id @default(autoincrement())
  company_id Int?
  name       String
  email      String   @unique(map: "User_email_key")
  password   String
  created_at DateTime @default(now())
  company    company? @relation(fields: [company_id], references: [company_id], map: "User_company_id_fkey")

  @@index([company_id], map: "User_company_id_fkey")
}
